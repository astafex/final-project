--DLL--
DROP TABLE IF EXISTS BALANCE;
DROP TABLE IF EXISTS CARD;
DROP TABLE IF EXISTS ACCOUNT;

CREATE TABLE ACCOUNT
(
    ID             INT AUTO_INCREMENT PRIMARY KEY,
    NUMBER_ACCOUNT VARCHAR2(20) NOT NULL
);

CREATE TABLE BALANCE
(
    ID         INT AUTO_INCREMENT PRIMARY KEY,
    AMOUNT     DECIMAL     NOT NULL DEFAULT 0,
    CURRENCY   varchar2(3) NOT NULL,
    ACCOUNT_ID INT         NOT NULL,
    FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT (ID)
);

CREATE TABLE CARD
(
    ID              INT AUTO_INCREMENT PRIMARY KEY,
    NUMBER_CARD     VARCHAR2(16) NOT NULL,
    HOLDER_NAME     VARCHAR2(50) NOT NULL,
    EXPIRATION_DATE DATE         NOT NULL,
    PIN             NUMBER(4)    NOT NULL,
    BLOCKED         BOOL         NOT NULL,
    ACCOUNT_ID      INT          NOT NULL,
    FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT (ID)
);

CREATE UNIQUE INDEX ACCOUNT_NUMBER_UINDEX
    ON ACCOUNT (NUMBER_ACCOUNT);

CREATE UNIQUE INDEX CARDS_NUMBER_UINDEX
    ON CARD (NUMBER_CARD);

--DML--
INSERT INTO ACCOUNT (NUMBER_ACCOUNT)
VALUES ('00000000000000000001'),
       ('00000000000000000002'),
       ('00000000000000000003');

INSERT INTO CARD (NUMBER_CARD, HOLDER_NAME, EXPIRATION_DATE, PIN, BLOCKED, ACCOUNT_ID)
VALUES ('1111111111111111', 'Christopher_Nolan', '2024-09-01', 1111, 'false', 1),
       ('2222222222222222', 'Quentin_Tarantino', '2024-09-01', 2222, 'false', 2),
       ('3333333333333333', 'Martin_Scorsese', '2021-01-01', 3333, 'false', 3);

INSERT INTO BALANCE (AMOUNT, CURRENCY, ACCOUNT_ID)
VALUES ('11111.1', 'USD', 1),
       ('22222.2', 'USD', 2),
       ('33333.3', 'USD', 3);